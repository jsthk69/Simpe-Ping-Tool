# Simpe-Ping-Tool

# Ping Monitor – тёмный мониторинг пингов с GUI, графиками и Telegram

Небольшое десктоп-приложение на Python для сисадминов:

- тёмная GUI-морда на Tkinter  
- мониторинг доступности хостов через ping  
- история событий (UP/DOWN)  
- вкладка с графиками RTT по выбранному хосту  
- уведомления в Telegram при падении хоста  
- иконка в трее  
- сохранение настроек (хосты + Telegram) в `settings.json`  

Подходит как лёгкий локальный NOC-клиент «для себя».

---

## Возможности

- ✅ Периодический ping заданных хостов
- ✅ Цветной статус:
  - зелёный — OK  
  - красный — DOWN  
- ✅ История событий:
  - фиксируются переходы `UP → DOWN` и `DOWN → UP`
- ✅ Вкладка «Графики»:
  - RTT для выбранного хоста
  - хранится до 200 последних измерений
- ✅ Telegram-уведомления:
  - включаются/выключаются через GUI
  - настраиваются `Bot token` и `Chat ID`
- ✅ Управление хостами через GUI:
  - добавить / изменить / удалить
- ✅ Настройки и хосты:
  - сохраняются в `settings.json`
  - подтягиваются при следующем запуске
- ✅ Тёмная тема везде:
  - кнопки, поля, вкладки, список, графики
- ✅ Иконка в трее + своя иконка окна (`icon.png`)

---

## Требования

- Python 3.10+ (теоретически пойдёт и на 3.8+, но лучше свежее)
- Windows / Linux (делалось под Windows, но код кроссплатформенный)
- Установленные пакеты:

```bash
pip install matplotlib pystray pillow

Tkinter обычно идёт в комплекте с Python под Windows. Если вдруг его нет — нужно доустановить через пакетный менеджер ОС.
Структура проекта

Минимальный набор файлов:

project/
  ping_monitor_full.py   # основной скрипт
  icon.png               # иконка окна и трея (PNG ~100×100)
  settings.json          # создаётся автоматически при первом запуске

icon.png — любая ваша картинка, лучше квадратная, тёмная, без мелких деталей.
Установка и запуск из исходников

    Клонируем репозиторий или просто кидаем файлы в папку:

git clone https://github.com/username/ping-monitor.git
cd ping-monitor

    Ставим зависимости:

pip install matplotlib pystray pillow

    Кладём рядом icon.png.

    Запуск:

python ping_monitor_full.py

Приложение откроется в виде окна с двумя вкладками:
Мониторинг и Графики.
Настройка хостов

Через кнопку «Управление хостами»:

    открывается окно с текущим списком

    можно:

        добавить новый хост (имя + IP/домен)

        изменить выбранный

        удалить выбранный

Все изменения сразу:

    применяются к таблице мониторинга

    сохраняются в settings.json

Формат в settings.json (для понимания):

{
  "hosts": [
    { "name": "Google DNS", "host": "8.8.8.8" },
    { "name": "Cloudflare DNS", "host": "1.1.1.1" }
  ],
  "telegram": {
    "enabled": false,
    "bot_token": "",
    "chat_id": ""
  }
}

Править руками не обязательно — всё есть в GUI.
Настройка Telegram

    Создаёте бота у @BotFather

    Получаете Bot token

    Узнаёте Chat ID (любым удобным способом: через бота, API и т.д.)

    В приложении жмёте кнопку «Настройки Telegram»:

        ставите галку «Включить уведомления в Telegram»

        вводите Bot token

        вводите Chat ID

        жмёте «Сохранить»

При падении хоста (переход OK → DOWN) придёт сообщение вида:

❗ Упал хост:
Google DNS (8.8.8.8)

Если галка снята или токен/чат пустые — уведомления не шлются.
История событий

Кнопка «История событий»:

    показывает список:

        [HH:MM:SS] Имя (хост): UP

        [HH:MM:SS] Имя (хост): DOWN

    пишет только изменения состояния, а не каждый ping

    есть кнопка «Очистить»

История пока хранится в памяти (с момента запуска). При желании можно допилить лог в файл.
Вкладка «Графики»

Вкладка «Графики»:

    сверху:

        выпадающий список «Хост для графика»

        кнопка «Обновить»

    ниже:

        график RTT в мс по выбранному хосту

        ось X — номер измерения (1, 2, 3…)

        ось Y — RTT в мс

        неудачные пинги учитываются как NaN (пробелы в линии)

В истории хранится до MAX_RTT_POINTS (по умолчанию 200) последних измерений для каждого хоста.
Иконка в трее

    Загрузка иконки идёт из icon.png

    Иконка запускается через pystray в отдельном потоке

    Правый клик по иконке:

        «Открыть» — показать окно

        «Выйти» — корректно закрыть приложение

Сборка в .exe (Windows)

Чтобы получить автономный .exe без консоли:

    Ставим PyInstaller:

pip install pyinstaller

    (Опционально) делаем app.ico из icon.png (любой онлайн-конвертер).

    Из папки проекта:

pyinstaller ^
  --onefile ^
  --windowed ^
  --noconsole ^
  --name PingMonitor ^
  --icon app.ico ^
  --add-data "icon.png;." ^
  ping_monitor_full.py

После сборки:

    dist/PingMonitor.exe — готовый файл

    в трее и в окне будет использоваться icon.png

    в таскбаре — иконка из app.ico

Настройки по умолчанию

Если settings.json ещё нет, приложение стартует с такими хостами:

    Google DNS (8.8.8.8)

    Cloudflare DNS (1.1.1.1)

    Яндекс (ya.ru)

    Роутер (192.168.1.1)

И Telegram выключен (enabled: false).
Идеи для развития

Если захочешь допилить:

    лог в файл (events.log) + автоподгрузка истории

    экспорт RTT в CSV/JSON

    фильтрация истории по хосту/типу события (только DOWN)

    разные цвета линий для разных хостов на одном графике

    web-интерфейс (FastAPI + тот же matplotlib/Plotly)
